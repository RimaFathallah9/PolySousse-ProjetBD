{% extends 'layout.html' %}

{% block content %}
    {% if current_user.role == 'admin' %}
    <div class="col-md-4">
        <div class="card">
            <div class="card-header bg-success text-white">
                Create Event
            </div>
            <div class="card-body">
                <form action="{{ url_for('events') }}" method="POST">
                    <div class="mb-3">
                        <label for="title" class="form-label">Event Title</label>
                        <input type="text" class="form-control" id="title" name="title" required>
                    </div>
                    <div class="mb-3">
                        <label for="description" class="form-label">Description</label>
                        <textarea class="form-control" id="description" name="description" rows="3"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="date_event" class="form-label">Date & Time</label>
                        <input type="datetime-local" class="form-control" id="date_event" name="date_event" required>
                    </div>
                    <div class="mb-3">
                        <label for="price" class="form-label">Price ($)</label>
                        <input type="number" step="0.01" class="form-control" id="price" name="price" value="0.00">
                    </div>
                    <button type="submit" class="btn btn-success w-100">Create Event</button>
                </form>
            </div>
        </div>
    </div>
    {% endif %}
    
    <div class="{% if current_user.role == 'admin' %}col-md-8{% else %}col-md-12{% endif %}">
        <div class="card">
            <div class="card-header">
                Upcoming Events
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Title</th>
                                <th>Description</th>
                                <th>Price</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for event in events %}
                            <tr>
                                <td>{{ event.date_event }}</td>
                                <td><strong>{{ event.title }}</strong></td>
                                <td>{{ event.description }}</td>
                                <td>${{ event.price }}</td>
                            </tr>
                            {% else %}
                            <tr>
                                <td colspan="4" class="text-center">No events scheduled.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
